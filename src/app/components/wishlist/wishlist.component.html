<div class="row">
  <div class="col-12 px-0 mb-4 sticker authorised">
    @if (!!(activePlatforms$ | async)?.length) {
      <div>
        <div class="p-3" class="stickerContent">
          <ul class="nav nav-pills flex-wrap justify-content-start mb-0">
            @if ((activePlatforms$ | async)?.includes(6)) {
              <li class="me-2 mb-2"
                >
                <a class="btn-pink px-4 py-2 fw-semibold d-flex justify-content-between align-items-center"
                  [class.active]="activeCategory === 6"
                  (click)="setActiveCategory(6)">
                  PC
                </a>
              </li>
            }
            @if ((activePlatforms$ | async)?.includes(38)) {
              <li class="me-2 mb-2"
                >
                <a class="btn-pink px-4 py-2 fw-semibold d-flex justify-content-between align-items-center"
                  [class.active]="activeCategory === 38"
                  (click)="setActiveCategory(38)">
                  PSP
                </a>
              </li>
            }
            @if ((activePlatforms$ | async)?.includes(8)) {
              <li class="me-2 mb-2"
                >
                <a class="btn-pink px-4 py-2 fw-semibold d-flex justify-content-between align-items-center"
                  [class.active]="activeCategory === 8"
                  (click)="setActiveCategory(8)">
                  PS2
                </a>
              </li>
            }
            @if ((activePlatforms$ | async)?.includes(9)) {
              <li class="me-2 mb-2"
                >
                <a class="btn-pink px-4 py-2 fw-semibold d-flex justify-content-between align-items-center"
                  [class.active]="activeCategory === 9"
                  (click)="setActiveCategory(9)">
                  PS3
                </a>
              </li>
            }
            @if ((activePlatforms$ | async)?.includes(48)) {
              <li class="me-2 mb-2"
                >
                <a class="btn-pink px-4 py-2 fw-semibold d-flex justify-content-between align-items-center"
                  [class.active]="activeCategory === 48"
                  (click)="setActiveCategory(48)">
                  PS4
                </a>
              </li>
            }
            @if ((activePlatforms$ | async)?.includes(167)) {
              <li class="me-2 mb-2"
                >
                <a class="btn-pink px-4 py-2 fw-semibold d-flex justify-content-between align-items-center"
                  [class.active]="activeCategory === 167"
                  (click)="setActiveCategory(167)">
                  PS5
                </a>
              </li>
            }
          </ul>
        </div>
      </div>
    }
  </div>
  @if (!!(collection$ | async)?.length) {
    @for (product of collection$ | async; track product) {
      <div class="col-12 p-3" style="color: rgba(211, 225, 236, 1);">
        <div
          class="game-card position-relative row"
          [routerLink]="['/products/' + product.product_id.toString(), {platform: activeCategory}]"
          style="cursor: pointer;"
          (click)="null"
          >
          <div
            class="col-auto px-0"
            style="height: 92px; overflow: hidden;"
            >
            <img
              [src]="product.image_url"
              [alt]="product.product_name"
              class="img-fluid"
              style="max-height: 100%; object-fit: cover;"
              (error)="product.image_url = null"
              />
          </div>
          <div class="col-10 d-flex flex-column justify-content-between" style="padding-top:20px; padding-left: 20px; padding-right: 20px; padding-bottom: 16px;">
            <div>
              <div class="card-title text-truncate fw-bold mb-1">
                {{ product.product_name }}
              </div>
              <p class="text-lite-muted small mb-3">
                {{ product.platform_name }} [{{ product.region_name }}]
              </p>
            </div>
          </div>
          <div class="col-1 align-items-end d-flex flex-column justify-content-center">
            <a
              type="button"
              (click)="remove(product.release_id, $event); $event.stopPropagation();"
              >
              <svg width="44" height="38" viewBox="0 0 44 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="0.5" y="0.5" width="43" height="37" rx="7.5" stroke="#2D587E"/>
                <path d="M19.0833 14.4286V12.4286C19.0833 12.0497 19.237 11.6863 19.5105 11.4184C19.784 11.1505 20.1549 11 20.5417 11H23.4583C23.8451 11 24.216 11.1505 24.4895 11.4184C24.763 11.6863 24.9167 12.0497 24.9167 12.4286V14.4286M15 14.4286H29M27.8333 14.4286V25.4286C27.8333 25.8453 27.6643 26.245 27.3635 26.5397C27.0626 26.8344 26.6546 27 26.2292 27H17.7708C17.3454 27 16.9374 26.8344 16.6365 26.5397C16.3357 26.245 16.1667 25.8453 16.1667 25.4286V14.4286H27.8333Z" stroke="#8AACC9" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
    }
  } @else {
    <div class="card bg-dark text-white shadow rounded-4 p-4 p-md-5 text-center my-4">
      <h5 class="text-warning mb-3">Вишлист пока пуст</h5>
      <p class="text-light mb-2">
        Не нашли, что ищете? Добавляйте игры в
        <a [routerLink]="'/wishlist'" class="text-info text-decoration-none fw-semibold">вишлист</a>,
        чтобы следить за их появлением в продаже или на обмен.
      </p>
      <p class="text-light mb-2">
        Это отличный способ отслеживать редкие издания, нужные дополнения и просто игры, которые вы хотите попробовать.
      </p>
      <p class="text-light mb-4">
        Начните с <a [routerLink]="'/products'" class="text-info text-decoration-none fw-semibold">каталога</a> —
        найдите любимые тайтлы и добавьте их в свой список желаемого. Так вы ничего не упустите!
      </p>
      <div>
        <a [routerLink]="'/products'" class="btn btn-outline-info btn-lg fw-semibold">
          Перейти в каталог
        </a>
      </div>
    </div>
  }

</div>