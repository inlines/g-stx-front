<div class="header-bg bg-dark text-white shadow-sm py-3 px-3 px-lg-5">
  <div class="row align-items-center">
    <!-- –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" (—Ç–æ–ª—å–∫–æ —Ç–∞–º –≥–¥–µ –Ω—É–∂–Ω–∞) -->
    @if (showBackButton$ | async) {
      <div class="col-auto">
        <a class="nav-link text-white p-1 rounded-3 d-flex align-items-center" (click)="goBack()">
          ‚Ü©Ô∏è <span class="d-none d-sm-inline ms-1">–ù–∞–∑–∞–¥</span>
        </a>
      </div>
    }

    <!-- –õ–æ–≥–æ –∏ –∫–Ω–æ–ø–∫–∏ -->
    <div class="col d-flex align-items-center gap-3 flex-wrap">
      <!-- –ö–Ω–æ–ø–∫–∞ "–ö–∞—Ç–∞–ª–æ–≥" -->
      <a class="nav-link text-white fw-bold px-2 py-1 bg-secondary bg-opacity-25 rounded-3 d-flex align-items-center" routerLink="/">
        üéÆ <span class="d-none d-sm-inline ms-1">–ö–∞—Ç–∞–ª–æ–≥</span>
      </a>

      <!-- –ú–µ–Ω—é (–≤–∏–¥–Ω–æ –≤—Å–µ–≥–¥–∞ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–µ, —Å–∫—Ä—ã—Ç–æ –Ω–∞ –º–æ–±–∏–ª–µ) -->
      <div class="d-none d-sm-flex gap-3">
        @if (isAuthorised$ | async) {
          <a class="nav-link text-white px-2 py-1 bg-secondary bg-opacity-25 rounded-3 d-flex align-items-center" routerLink="/collection">
            üóÇÔ∏è <span class="ms-1">–ú–æ—è –∫–æ–ª–ª–µ–∫—Ü–∏—è</span>
          </a>
        }
        @if (isAuthorised$ | async) {
          <a class="nav-link text-white px-2 py-1 bg-secondary bg-opacity-25 rounded-3 d-flex align-items-center" routerLink="/wishlist">
            ‚≠ê <span class="ms-1">–í–∏—à–ª–∏—Å—Ç</span>
          </a>
        }
        @if (isAuthorised$ | async) {
          <div class="position-relative">
            @if (isConnected$ | async) {
              <small class="position-absolute top-0 start-50 translate-middle text-info" style="font-size: 0.7rem;">online</small>
            }
            <a class="nav-link text-white px-2 py-1 bg-secondary bg-opacity-25 rounded-3 d-flex align-items-center position-relative" (click)="toggleChat()">
              üí¨ <span class="ms-1">–ß–∞—Ç—ã</span>
              @if ((showChatWarning$ | async)) {
                <span class="position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle animate-blink" style="width: 10px; height: 10px;"></span>
              }
            </a>
          </div>
        }
      </div>
    </div>

    <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å / –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è -->
    <div class="col-auto d-flex justify-content-end align-items-center">
      @if (isAuthorised$ | async; as user) {
        <span class="me-2 text-info fw-semibold d-none d-md-inline">
          üë§ {{ currentUser$ | async }}
        </span>
        <a class="btn btn-sm btn-outline-light px-2" (click)="logout()">
          üö™<span class="d-none d-sm-inline"> –í—ã–π—Ç–∏</span>
        </a>
      } @else {
        <a class="btn btn-sm btn-primary px-2" routerLink="/login">
          üîê<span class="d-none d-sm-inline"> –í–æ–π—Ç–∏</span>
        </a>
      }
    </div>

    <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é (—Ç–æ–ª—å–∫–æ –Ω–∞ –º–æ–±–∏–ª–µ) -->
    <div class="col-12 d-sm-none mt-2">
      <div class="d-flex justify-content-start gap-3 flex-wrap">
        @if (isAuthorised$ | async) {
          <a class="nav-link text-white px-2 py-1 bg-secondary bg-opacity-25 rounded-3 d-flex align-items-center" routerLink="/collection">
            üóÇÔ∏è <span class="ms-1">–ö–æ–ª–ª–µ–∫—Ü–∏—è</span>
          </a>
        }
        @if (isAuthorised$ | async) {
          <a class="nav-link text-white px-2 py-1 bg-secondary bg-opacity-25 rounded-3 d-flex align-items-center" routerLink="/wishlist">
            ‚≠ê <span class="ms-1">–í–∏—à–ª–∏—Å—Ç</span>
          </a>
        }
        @if (isAuthorised$ | async) {
          <div class="position-relative">
            @if (isConnected$ | async) {
              <small class="position-absolute top-0 start-50 translate-middle text-info" style="font-size: 0.7rem;">online</small>
            }
            <a class="nav-link text-white px-2 py-1 bg-secondary bg-opacity-25 rounded-3 d-flex align-items-center position-relative" (click)="toggleChat()">
              üí¨ <span class="ms-1">–ß–∞—Ç—ã</span>
              @if ((showChatWarning$ | async)) {
                <span class="position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle animate-blink" style="width: 10px; height: 10px;"></span>
              }
            </a>
          </div>
        }
      </div>
    </div>
  </div>
</div>